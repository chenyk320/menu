# 删除菜品图片功能说明

## 功能概述
在餐厅管理后台中新增了删除菜品图片的功能，允许管理员删除已有菜品的图片，而无需删除整个菜品。

## 功能特点
- ✅ 只删除图片文件，保留菜品信息
- ✅ 自动清理数据库中的图片路径
- ✅ 实时更新界面显示
- ✅ 确认对话框防止误操作
- ✅ 响应式设计，支持移动端

## 使用方法

### 1. 进入编辑模式
1. 登录管理后台 (`/admin`)
2. 在"菜品管理"标签页中找到要编辑的菜品
3. 点击"编辑"按钮

### 2. 删除图片
1. 在编辑模态框中，如果菜品有图片，会显示当前图片预览
2. 点击"删除当前图片"按钮
3. 确认删除操作
4. 图片将被永久删除，界面会立即更新

### 3. 验证结果
- 菜品列表中的图片会消失
- 编辑模态框中显示"暂无图片"
- 可以重新上传新图片

## 技术实现

### 后端API
- **路由**: `DELETE /api/dish/<int:dish_id>/image`
- **功能**: 删除指定菜品的图片文件和数据库记录
- **权限**: 需要管理员登录

### 前端功能
- **位置**: 编辑菜品模态框
- **按钮**: "删除当前图片"按钮（仅在有图片时显示）
- **确认**: 浏览器确认对话框
- **反馈**: 成功/错误消息提示

### 文件操作
- 删除 `static/images/` 目录下的图片文件
- 清空数据库 `dish.image` 字段
- 更新前端显示状态

## 安全考虑
- 需要管理员身份验证
- 确认对话框防止误操作
- 只删除指定菜品的图片，不影响其他数据
- 文件路径验证防止目录遍历攻击

## 兼容性
- 支持所有现代浏览器
- 响应式设计，适配移动设备
- 与现有菜品管理功能完全兼容

## 注意事项
- 删除操作不可逆，请谨慎操作
- 删除图片后，菜品仍可正常显示和编辑
- 可以随时重新上传新图片













